{% extends 'base.html' %}

{% block content %}
<div class="max-w-5xl mx-auto">
    <!-- Header -->
    <div class="text-center mb-8">
        <div class="text-6xl mb-4">🏆</div>
        <h1 class="text-4xl font-bold text-gray-800 mb-2">Liderlik Tablosu</h1>
        <p class="text-gray-600">En başarılı öğrenciler</p>
    </div>

    <!-- Leaderboard -->
    <div class="bg-white rounded-2xl shadow-2xl overflow-hidden">
        {% if top_students %}
        <div class="divide-y">
            {% for student in top_students %}
            <div class="p-6 hover:bg-gray-50 transition {% if student == user %}bg-purple-50{% endif %}">
                <div class="flex items-center justify-between">
                    <div class="flex items-center space-x-6">
                        <!-- Sıra -->
                        <div class="{% if forloop.counter == 1 %}text-yellow-500 text-5xl{% elif forloop.counter == 2 %}text-gray-400 text-4xl{% elif forloop.counter == 3 %}text-orange-600 text-4xl{% else %}text-gray-600 text-2xl{% endif %} font-bold w-16 text-center">
                            {% if forloop.counter == 1 %}🥇
                            {% elif forloop.counter == 2 %}🥈
                            {% elif forloop.counter == 3 %}🥉
                            {% else %}#{{ forloop.counter }}{% endif %}
                        </div>

                        <!-- Avatar -->
                        <div class="w-16 h-16 bg-gradient-to-br from-purple-400 to-blue-400 rounded-full flex items-center justify-center text-white font-bold text-2xl">
                            {{ student.username.0|upper }}
                        </div>

                        <!-- Bilgiler -->
                        <div>
                            <h3 class="font-bold text-xl text-gray-800">
                                {{ student.username }}
                                {% if student == user %}<span class="text-purple-600">(Sen)</span>{% endif %}
                            </h3>
                            <p class="text-gray-600 text-sm">Seviye {{ student.level }}</p>
                        </div>
                    </div>

                    <!-- Puan -->
                    <div class="text-right">
                        <div class="text-3xl font-bold text-yellow-600">{{ student.total_points }}</div>
                        <div class="text-sm text-gray-500">puan</div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        {% else %}
        <div class="text-center py-16">
            <div class="text-6xl mb-4">🎯</div>
            <p class="text-xl text-gray-600">Henüz kimse puan kazanmamış</p>
        </div>
        {% endif %}
    </div>

    {% if user_rank and user_rank > 20 %}
    <!-- Kullanıcının Sırası (Top 20'de değilse) -->
    <div class="mt-6 bg-purple-100 border-2 border-purple-300 rounded-xl p-6">
        <div class="flex items-center justify-between">
            <div class="flex items-center space-x-4">
                <div class="text-2xl font-bold text-purple-600">#{​{ user_rank }}</div>
                <div class="w-12 h-12 bg-purple-600 rounded-full flex items-center justify-center text-white font-bold text-xl">
                    {{ user.username.0|upper }}
                </div>
                <div>
                    <h3 class="font-bold text-lg">{{ user.username }} (Sen)</h3>
                    <p class="text-gray-600 text-sm">Seviye {{ user.level }}</p>
                </div>
            </div>
            <div class="text-right">
                <div class="text-2xl font-bold text-purple-600">{{ user.total_points }}</div>
                <div class="text-sm text-gray-500">puan</div>
            </div>
        </div>
    </div>
    {% endif %}

    <!-- Dön Butonu -->
    <div class="text-center mt-8">
        <a href="{% url 'dashboard' %}" class="inline-block bg-purple-600 text-white px-8 py-3 rounded-lg font-medium hover:bg-purple-700 transition">
            ← Dashboard'a Dön
        </a>
    </div>
</div>
{% endblock %}